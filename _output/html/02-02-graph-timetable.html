<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.45">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Graph Data Model for Timebling –  </title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./02-02b-expand.html" rel="next">
<link href="./02-01-comparison.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script src="site_libs/quarto-contrib/glightbox/glightbox.min.js"></script>
<link href="site_libs/quarto-contrib/glightbox/glightbox.min.css" rel="stylesheet">
<link href="site_libs/quarto-contrib/glightbox/lightbox.css" rel="stylesheet">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-sidebar docked nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="./index.html" class="navbar-brand navbar-brand-logo">
    <img src="./images/logo3.png" alt="" class="navbar-logo">
    </a>
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title"></span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link active" href="./index.html" aria-current="page"> <i class="bi bi-home" role="img">
</i> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-introduction" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Introduction</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-introduction">    
        <li>
    <a class="dropdown-item" href="./01-01a-introduction.html">
 <span class="dropdown-text">Introduction</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./01-02-background.html">
 <span class="dropdown-text">Background and Motivation</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./01-03-good-timetable.html">
 <span class="dropdown-text">What is a Good Timetable?</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./01-04-project.html">
 <span class="dropdown-text">Project Aims and Scope</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-graph-data-model" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Graph Data Model</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-graph-data-model">    
        <li>
    <a class="dropdown-item" href="./02-01-comparison.html">
 <span class="dropdown-text">Graph vs Relational Data Models</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./02-02-graph-timetable.html">
 <span class="dropdown-text">Graph Data Model for Timetabling</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./02-02b-expand.html">
 <span class="dropdown-text">Early Insights and Model Expansion</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./02-03-graph-time.html">
 <span class="dropdown-text">Graphing Time</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./02-04-challenge-oppos.html">
 <span class="dropdown-text">Opportunities and Challenges</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-data-pipeline" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Data Pipeline</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-data-pipeline">    
        <li>
    <a class="dropdown-item" href="./03-01-overview.html">
 <span class="dropdown-text">Overview</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./03-02-approach.html">
 <span class="dropdown-text">Approach</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./03-03-config.html">
 <span class="dropdown-text">Configuration and Logging</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./03-04-extract.html">
 <span class="dropdown-text">Extract</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./03-05-transform.html">
 <span class="dropdown-text">Transform</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./03-06a-load.html">
 <span class="dropdown-text">Google Drive Load</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./03-06b-load.html">
 <span class="dropdown-text">Neo4j Load</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./03-07-reflection.html">
 <span class="dropdown-text">Reflection</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="./04-timetable-metrics.html"> 
<span class="menu-text">Timetable Metrics</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-conclusion" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Conclusion</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-conclusion">    
        <li>
    <a class="dropdown-item" href="./05-future-opportunities.html">
 <span class="dropdown-text">Future Opportunities</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./06-conclusion.html">
 <span class="dropdown-text">Conclusion</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item">
    <a class="nav-link" href="./appendix-random-graph.html"> 
<span class="menu-text">Appendix &amp; References</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="././_output/pdf/Graph-Time.pdf"> <i class="bi bi-file-pdf" role="img">
</i> 
<span class="menu-text">PDF Version</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/your-username/your-repo/issues/new"> <i class="bi bi-bug" role="img" aria-label="Report an issue">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/"> <i class="bi bi-github" role="img" aria-label="GitHub">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="mailto:zoonalink@gmail.com"> <i class="bi bi-envelope" role="img" aria-label="Email me">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./02-01-comparison.html">Graph Data Model</a></li><li class="breadcrumb-item"><a href="./02-02-graph-timetable.html">Graph Data Model for Timetabling</a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-full page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation docked overflow-auto">
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Home</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="false">
 <span class="menu-text">Introduction</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./01-01a-introduction.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Introduction</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./01-02-background.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Background and Motivation</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./01-03-good-timetable.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">What is a Good Timetable?</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./01-04-project.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Project Aims and Scope</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true">
 <span class="menu-text">Graph Data Model</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./02-01-comparison.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Graph vs Relational Data Models</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./02-02-graph-timetable.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">Graph Data Model for Timetabling</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./02-02b-expand.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Early Insights and Model Expansion</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./02-03-graph-time.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Graphing Time</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./02-04-challenge-oppos.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Opportunities and Challenges</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="false">
 <span class="menu-text">Data Pipeline</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./03-01-overview.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Overview</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./03-02-approach.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Approach</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./03-03-config.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Configuration and Logging</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./03-04-extract.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Extract</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./03-05-transform.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Transform</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./03-06a-load.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Google Drive Load</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./03-06b-load.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Neo4j Load</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./03-07-reflection.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Reflection</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./04-timetable-metrics.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Timetable Metrics</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="false">
 <span class="menu-text">Final Thoughts</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./05-future-opportunities.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Future Opportunities</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./06-conclusion.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Conclusion</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="false">
 <span class="menu-text">Appendix &amp; References</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./appendix-random-graph.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Random Graph Generator</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./appendix-tech-stack.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Technology Stack</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./appendix-config.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Configuration</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./appendix-anonymise.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Anonymisation</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">References</span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#an-iterative-approach" id="toc-an-iterative-approach" class="nav-link active" data-scroll-target="#an-iterative-approach">An Iterative Approach</a></li>
  <li><a href="#core-nodes" id="toc-core-nodes" class="nav-link" data-scroll-target="#core-nodes">Core Nodes</a>
  <ul class="collapse">
  <li><a href="#the-building-blocks" id="toc-the-building-blocks" class="nav-link" data-scroll-target="#the-building-blocks">The Building Blocks</a></li>
  </ul></li>
  <li><a href="#defining-relationships" id="toc-defining-relationships" class="nav-link" data-scroll-target="#defining-relationships">Defining Relationships</a>
  <ul class="collapse">
  <li><a href="#connecting-the-dots" id="toc-connecting-the-dots" class="nav-link" data-scroll-target="#connecting-the-dots">Connecting the Dots</a></li>
  </ul></li>
  <li><a href="#early-insights-unveiling-basic-patterns" id="toc-early-insights-unveiling-basic-patterns" class="nav-link" data-scroll-target="#early-insights-unveiling-basic-patterns">Early Insights: Unveiling Basic Patterns</a>
  <ul class="collapse">
  <li><a href="#example-code" id="toc-example-code" class="nav-link" data-scroll-target="#example-code">Example code</a></li>
  </ul></li>
  <li><a href="#expanding-the-model-towards-richer-insights" id="toc-expanding-the-model-towards-richer-insights" class="nav-link" data-scroll-target="#expanding-the-model-towards-richer-insights">Expanding the Model: Towards Richer Insights</a>
  <ul class="collapse">
  <li><a href="#potential-expansions" id="toc-potential-expansions" class="nav-link" data-scroll-target="#potential-expansions">Potential Expansions:</a></li>
  </ul></li>
  <li><a href="#notes-to-be-deleted" id="toc-notes-to-be-deleted" class="nav-link" data-scroll-target="#notes-to-be-deleted">NOTES TO BE DELETED</a></li>
  <li><a href="#approach" id="toc-approach" class="nav-link" data-scroll-target="#approach">approach</a></li>
  <li><a href="#nodes" id="toc-nodes" class="nav-link" data-scroll-target="#nodes">nodes</a></li>
  <li><a href="#properties" id="toc-properties" class="nav-link" data-scroll-target="#properties">properties</a></li>
  <li><a href="#expansions" id="toc-expansions" class="nav-link" data-scroll-target="#expansions">expansions</a>
  <ul class="collapse">
  <li><a href="#time" id="toc-time" class="nav-link" data-scroll-target="#time">time</a></li>
  <li><a href="#appendix--" id="toc-appendix--" class="nav-link" data-scroll-target="#appendix--">appendix -</a>
  <ul class="collapse">
  <li><a href="#example-load" id="toc-example-load" class="nav-link" data-scroll-target="#example-load">example load</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#results" id="toc-results" class="nav-link" data-scroll-target="#results">results</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content column-body" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./02-01-comparison.html">Graph Data Model</a></li><li class="breadcrumb-item"><a href="./02-02-graph-timetable.html">Graph Data Model for Timetabling</a></li></ol></nav>
<div class="quarto-title">
<h1 class="title">Graph Data Model for Timebling</h1>
</div>



<div class="quarto-title-meta column-body">

    
  
    
  </div>
  


</header>


<div class="callout callout-style-default callout-warning callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
TODO
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li>write up section - review notes</li>
<li>new page of difficulties with time - see poc2 time</li>
<li>appendix with queries (queries.ipynb (graph-project.ipynb)) - copy all queries onto one appendix see graph-tt</li>
</ul>
</div>
</div>
<p>Having discussed some advantages of graph databases for representing interconnected data, this section delves into the specifics of a proposed graph data model tailored for university timetabling. This model serves as the foundation for exploring graph-based analysis and its potential to unlock valuable insights.</p>
<section id="an-iterative-approach" class="level2">
<h2 class="anchored" data-anchor-id="an-iterative-approach">An Iterative Approach</h2>
<p>The design of this graph data model was iterative: design, build, test, review, and revise -&gt; …and repeat. Using Neo4j Desktop and an Aura cloud instance, the first model was small scope in scope, incorporating minimal nodes and properties. This iterative approach allows for flexibility and refinement based on real-world data and evolving requirements.</p>
</section>
<section id="core-nodes" class="level2">
<h2 class="anchored" data-anchor-id="core-nodes">Core Nodes</h2>
<section id="the-building-blocks" class="level3">
<h3 class="anchored" data-anchor-id="the-building-blocks">The Building Blocks</h3>
<p>At its core, the timetable model revolves around four key entities represented as nodes:</p>
<div class="table">
<table class="caption-top table">
<thead>
<tr class="header">
<th>Node</th>
<th>Property</th>
<th>Description</th>
<th>Data Type</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Student</td>
<td>firstName</td>
<td>Legal first name</td>
<td>string</td>
</tr>
<tr class="even">
<td></td>
<td>lastName</td>
<td>Legal last name</td>
<td>string</td>
</tr>
<tr class="odd">
<td></td>
<td>studentID</td>
<td>University identifier</td>
<td>integer</td>
</tr>
<tr class="even">
<td></td>
<td>splusID</td>
<td>Timetable URN</td>
<td>string</td>
</tr>
<tr class="odd">
<td>Lecturer</td>
<td>firstName</td>
<td>First name</td>
<td>string</td>
</tr>
<tr class="even">
<td></td>
<td>lastName</td>
<td>Last name</td>
<td>string</td>
</tr>
<tr class="odd">
<td></td>
<td>staffID</td>
<td>University identifier</td>
<td>integer</td>
</tr>
<tr class="even">
<td></td>
<td>splusID</td>
<td>Timetable URN</td>
<td>string</td>
</tr>
<tr class="odd">
<td>Room</td>
<td>name</td>
<td>Room name</td>
<td>string</td>
</tr>
<tr class="even">
<td></td>
<td>splusID</td>
<td>Timetable URN</td>
<td>integer</td>
</tr>
<tr class="odd">
<td>Activity</td>
<td>name</td>
<td>Activity name</td>
<td>string</td>
</tr>
<tr class="even">
<td></td>
<td>description</td>
<td>Activity description</td>
<td>string</td>
</tr>
<tr class="odd">
<td></td>
<td>startTime</td>
<td>Scheduled start time</td>
<td>datetime</td>
</tr>
<tr class="even">
<td></td>
<td>endTime</td>
<td>Scheduled end time</td>
<td>datetime</td>
</tr>
<tr class="odd">
<td></td>
<td>date</td>
<td>Date of activity</td>
<td>date</td>
</tr>
</tbody>
</table>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="./images/poc1-import-interface.png" class="lightbox" data-gallery="quarto-lightbox-gallery-1" title="Neo4j Interface showing basic nodes and properties"><img src="./images/poc1-import-interface.png" class="img-fluid figure-img" style="width:75.0%" alt="Neo4j Interface showing basic nodes and properties"></a></p>
<figcaption>Neo4j Interface showing basic nodes and properties</figcaption>
</figure>
</div>
</section>
</section>
<section id="defining-relationships" class="level2">
<h2 class="anchored" data-anchor-id="defining-relationships">Defining Relationships</h2>
<section id="connecting-the-dots" class="level3">
<h3 class="anchored" data-anchor-id="connecting-the-dots">Connecting the Dots</h3>
<p>These core nodes are interconnected through relationships that reflect the dynamics of a timetable:</p>
<ul>
<li>Student-<strong>[IS_ALLOCATED_TO]</strong>-&gt;Activity: Represents a student’s allocation to a specific activity.</li>
<li>Staff-<strong>[TEACHES_ON]</strong>-&gt;Activity: Indicates the staff member responsible for teaching an activity.</li>
<li>Activity-<strong>[TAKES_PLACE_IN]</strong>-&gt;Room: Connects an activity to the room where it is scheduled.</li>
</ul>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="./images/v1-core-nodes-rels-prop.png" class="lightbox" data-gallery="quarto-lightbox-gallery-2" title="Core Nodes and Properties"><img src="./images/v1-core-nodes-rels-prop.png" class="img-fluid figure-img" style="width:75.0%" alt="Core Nodes and Properties"></a></p>
<figcaption>Core Nodes and Properties</figcaption>
</figure>
</div>
</section>
</section>
<section id="early-insights-unveiling-basic-patterns" class="level2">
<h2 class="anchored" data-anchor-id="early-insights-unveiling-basic-patterns">Early Insights: Unveiling Basic Patterns</h2>
<p>Even with this basic model, we can easily extract valuable insights, for example:</p>
<ul>
<li><strong>Activity Load</strong>: Identify staff with the highest number of teaching activities or total teaching hours.</li>
<li><strong>Student Timetable Profiles</strong>: Calculate average hours per student or per programme to understand workload distribution.</li>
<li><strong>Resource utilisation</strong>: Determine the busiest locations or times on campus based on activity scheduling.</li>
<li><strong>Anomaly detection</strong>: Identify students who have unexpected profiles or unusual combinations</li>
</ul>
<section id="example-code" class="level3">
<h3 class="anchored" data-anchor-id="example-code">Example code</h3>
<section id="busiest-location-overall" class="level4">
<h4 class="anchored" data-anchor-id="busiest-location-overall">Busiest location overall</h4>
<pre class="{cypher}"><code>MATCH (r:Room)&lt;-[:TAKES_PLACE_IN]-(a:Activity)
WITH r, sum(a.duration) AS totalDuration
RETURN r.name AS Room, totalDuration
ORDER BY totalDuration DESC
LIMIT 1</code></pre>
</section>
<section id="busiest-location-for-a-specific-time" class="level4">
<h4 class="anchored" data-anchor-id="busiest-location-for-a-specific-time">Busiest location for a specific time</h4>
<pre class="{cypher}"><code>MATCH (r:Room)&lt;-[:TAKES_PLACE_IN]-(a:Activity)
WHERE a.startTime = "11:00" 
WITH r, count(a) AS activityCount
RETURN r.name AS Room, activityCount
ORDER BY activityCount DESC
LIMIT 1 </code></pre>
</section>
<section id="students-with-belowabove-average-hours" class="level4">
<h4 class="anchored" data-anchor-id="students-with-belowabove-average-hours">Students with below/above average hours</h4>
<pre class="{cypher}"><code>// Calculate program averages and standard deviations
MATCH (s:Student)-[:IS_ALLOCATED_TO]-&gt;(a:Activity)
WITH s.prog AS programme, AVG(a.duration) AS avgDuration, STDEV(a.duration) AS stdDev
GROUP BY programme

// Identify students outside the 10% margin 
MATCH (s:Student)-[:IS_ALLOCATED_TO]-&gt;(a:Activity)
WITH s.studentID AS studentID, s.prog AS program, SUM(a.duration) AS totalDuration
MATCH (avgData)
WHERE avgData.programme = programme
WITH studentID, programme, totalDuration, avgData.avgDuration AS avgDuration, avgData.stdDev AS stdDev
WHERE totalDuration &lt; avgDuration - (0.1 * avgDuration) OR totalDuration &gt; avgDuration + (0.1 * avgDuration)
RETURN studentID, programme, totalDuration, avgDuration, stdDev 
ORDER BY programme, totalDuration DESC</code></pre>
</section>
</section>
</section>
<section id="expanding-the-model-towards-richer-insights" class="level2">
<h2 class="anchored" data-anchor-id="expanding-the-model-towards-richer-insights">Expanding the Model: Towards Richer Insights</h2>
<p>The true power of the graph model lies in its extensibility. Introducing additional nodes and properties allows for a more comprehensive representation and enables more sophisticated analysis.</p>
<section id="potential-expansions" class="level3">
<h3 class="anchored" data-anchor-id="potential-expansions">Potential Expansions:</h3>
<ul>
<li><strong>Organisational Units</strong>: Include departments, colleges, or schools to analyse timetabling within organizational structures.</li>
<li><strong>Curriculum Data</strong>: Incorporate modules and programmes to understand the interconnectedness of courses and student enrolment patterns.</li>
<li><strong>Activity Types</strong>: Differentiate between lectures, seminars, labs, etc., for a more granular analysis of teaching and learning activities.</li>
<li><strong>Activity Delivery</strong>: Understand how teaching delivery (virtual, in-person, hybrid, drop-in) is factored.</li>
<li><strong>Student Attributes</strong>: Add properties like “international student” or “first-year student” to explore potential student clusters.</li>
</ul>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="./images/v2-expanded-tt-2.png" class="lightbox" data-gallery="quarto-lightbox-gallery-3" title="Example of Expanded Timetable Graph Model"><img src="./images/v2-expanded-tt-2.png" class="img-fluid figure-img" style="width:75.0%" alt="Example of Expanded Timetable Graph Model"></a></p>
<figcaption>Example of Expanded Timetable Graph Model</figcaption>
</figure>
</div>
</section>
</section>
<section id="notes-to-be-deleted" class="level2">
<h2 class="anchored" data-anchor-id="notes-to-be-deleted">NOTES TO BE DELETED</h2>
</section>
<section id="approach" class="level1">
<h1>approach</h1>
<p>iterative: design, build, test, review, revise and back to design Used: neo4j desktop and cloud instance started small (data wise -&gt; me and complexity (minimal nodes, minimal properties) things went wrong - many examples of wrong nodes, multiple relationships or more frustratingly - failure and error codes</p>
</section>
<section id="nodes" class="level1">
<h1>nodes</h1>
<p>The key nodes (nouns) in a timetable are:</p>
<ul>
<li>Student (Person)</li>
<li>Staff (Person)</li>
<li>Activity (Event)</li>
<li>Room (Location)</li>
</ul>
<p>The key nodes (nouns) are:</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Node</th>
<th>Property</th>
<th>Description</th>
<th>Data Type</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Student</td>
<td>firstName</td>
<td>Legal first name</td>
<td>string</td>
</tr>
<tr class="even">
<td></td>
<td>lastName</td>
<td>Legal last name</td>
<td>string</td>
</tr>
<tr class="odd">
<td></td>
<td>studentID</td>
<td>University identifier</td>
<td>integer</td>
</tr>
<tr class="even">
<td></td>
<td>splusID</td>
<td>Timetable URN</td>
<td>string</td>
</tr>
<tr class="odd">
<td>Lecturer</td>
<td>firstName</td>
<td>First name</td>
<td>string</td>
</tr>
<tr class="even">
<td></td>
<td>lastName</td>
<td>Last name</td>
<td>string</td>
</tr>
<tr class="odd">
<td></td>
<td>staffID</td>
<td>University identifier</td>
<td>integer</td>
</tr>
<tr class="even">
<td></td>
<td>splusID</td>
<td>Timetable URN</td>
<td>string</td>
</tr>
<tr class="odd">
<td>Room</td>
<td>name</td>
<td>Room name</td>
<td>string</td>
</tr>
<tr class="even">
<td></td>
<td>splusID</td>
<td>Timetable URN</td>
<td>integer</td>
</tr>
<tr class="odd">
<td>Activity</td>
<td>name</td>
<td>Activity name</td>
<td>string</td>
</tr>
<tr class="even">
<td></td>
<td>description</td>
<td>Activity description</td>
<td>string</td>
</tr>
<tr class="odd">
<td></td>
<td>startTime</td>
<td>Scheduled start time</td>
<td>datetime</td>
</tr>
<tr class="even">
<td></td>
<td>endTime</td>
<td>Scheduled end time</td>
<td>datetime</td>
</tr>
<tr class="odd">
<td></td>
<td>date</td>
<td>Date of activity</td>
<td>date</td>
</tr>
</tbody>
</table>
<ul>
<li><p>sample cypher of loading self (v1-core-load-student-node.png)</p></li>
<li><p>results v1-core-load-all-nodes.png</p></li>
<li><p>example of a student node (me) <img src="../images/v1.1-core-student-phl.png" class="img-fluid" alt="student detail"></p></li>
<li><p>all nodes loaded for MSc Data Science 2022-23 students:</p>
<ul>
<li><div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="../images/v1.1-load-all-nodes.png" class="lightbox" data-gallery="quarto-lightbox-gallery-4" title="all-nodes-for-posi"><img src="../images/v1.1-load-all-nodes.png" class="img-fluid figure-img" alt="all-nodes-for-posi"></a></p>
<figcaption>all-nodes-for-posi</figcaption>
</figure>
</div></li>
<li>no relationships # relationships</li>
</ul></li>
</ul>
<p>The nodes are related as follows:</p>
<ul>
<li><code>Student</code> <em>allocated to</em> <code>Activity</code>
<ul>
<li>alternatives include <em>attends</em></li>
</ul></li>
<li><code>Staff</code> <em>teaches on</em> <code>Activity</code>
<ul>
<li>alternatives include <em>lectures</em>, <em>leads</em>, etc.</li>
</ul></li>
<li><code>Activity</code> <em>takes place in</em> <code>Room</code>
<ul>
<li>alternatives include <em>scheduled in</em></li>
</ul></li>
</ul>
<p>It is clear that <code>Activity</code> is the central node in the basic model.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="attachment:v1-core-nodes-rels.png" class="lightbox" data-gallery="quarto-lightbox-gallery-5" title="core nodes with relationships"><img src="attachment:v1-core-nodes-rels.png" class="img-fluid figure-img" alt="core nodes with relationships"></a></p>
<figcaption>core nodes with relationships</figcaption>
</figure>
</div>
<ul>
<li>loaded into neo4j <img src="../images/v1.1-core-full-model.png" class="img-fluid" alt="v1.1 full model">
<ul>
<li>two clusters? waht are they</li>
<li>some orphans? who/waht are they?</li>
</ul></li>
<li>basic query examples - probably not worth
<ul>
<li>staff with most activities, hours</li>
<li>average hours per student, per programme</li>
<li>most popular activities</li>
<li>most popular tutors (attendance)</li>
<li>days with most activities</li>
<li>times with most activities / scheduled hours/start times</li>
<li>histogram of activities by day</li>
<li>most popular combinations (modules, pairs of modules, triplets)
<ul>
<li>most attended</li>
</ul></li>
<li>most attendance percentage</li>
<li>relationship between attendance and time/day of activity</li>
<li>anomalies, combinations</li>
</ul></li>
</ul>
</section>
<section id="properties" class="level1">
<h1>properties</h1>
<ul>
<li><p>dependent on use cases - which questions are to be answered</p></li>
<li><p>some may be better as nodes, others as properties on node or properties on relationship</p></li>
<li><p>no right or wrong - highly experimental, needs to be tested, optimised</p></li>
<li><p>flexbility of graph to accommodate</p></li>
<li><p>each node person/student, person/staff, activity, room needs some properties</p>
<ul>
<li>name, id, description</li>
<li>activity needs date, times, (although modelling time has many varieties)</li>
</ul></li>
</ul>
<p>image of final proof of concept simple model: v1-core-nodes-rels-prop.png</p>
</section>
<section id="expansions" class="level1">
<h1>expansions</h1>
<p>more nodes from timetable db could include:</p>
<ul>
<li>organisational unit (department, college, school)</li>
<li>curriculum data (module, programme) - activity is part of module, programme made of modules (compulsory, optional)</li>
<li>students who are pal leaders (as a mentoring relationship)</li>
<li>activity type (property or node) - lecture, seminar, workshop, lab</li>
<li>delivery type (property or node) - online, on-campus, recorded, optional, drop-in</li>
<li>technician staff facilitating workshops</li>
<li>equipment requirements in rooms</li>
</ul>
<p>more student properties could include: * reasonable adjustments * international student * first year student * pal leader</p>
<p>example of expanded model: <img src="../images/v2.0-expanded-tt.png" class="img-fluid" alt="Title"></p>
<p>this would allow for quickly getting insights such as:</p>
<ul>
<li>Identify students with anomalous timetables - e.g.&nbsp;timetables that have gaps of more than 2 hours between activities, or that violate a policy of no more than X hours per day.</li>
<li>Find the <strong>busiest locations</strong> on campus - analyse room nodes to identify those with the most connected activity nodes on a given day. Useful for improving room bookings.</li>
<li>Identify <strong>outlier teaching loads</strong> - find staff with significantly more or fewer allocated teaching hours compared to their peers. Analyse each staff node’s connected activity nodes and sum the durations</li>
<li>Analyse <strong>room utilisation</strong> - calculate the percentage of available hours that rooms are booked based on their connected activities. Help optimise room usage.</li>
<li>Identify <strong>module co-dependencies</strong> - find modules that are often taken together by analysing frequent appearing :CONTRIBUTES_TOWARDS relationships between modules taken by the same students.</li>
<li><strong>Cluster students</strong> based on their curriculum/programs using community detection algorithms on the connections between student nodes, program nodes and module nodes. Identify common trajectories.</li>
<li><strong>Predict student results</strong> - build a model based on relationships between student attributes, their enrollment relationships to modules, module difficulties and prerequisites, and historical grade data</li>
<li>Make <strong>course recommendations</strong> - suggest new modules to students based on their existing modules and other similar students’ module relationships.</li>
</ul>
<p>then the possible:</p>
<ul>
<li>adding more location data - buildings, latitude, longitude</li>
<li>student details - home postcode (travel distance),</li>
<li>student outcomes - module marks, award outcomes, graduate outcomes</li>
<li>admissions data - (free lunch scheme, social economic data, a-level results, inclusivity insights)</li>
<li>curriculum data - from master curriculum data</li>
<li>engagement data - attendance, engagement</li>
<li>space use data - wifi locators, how busy areas are, correlations</li>
<li></li>
</ul>
<section id="time" class="level2">
<h2 class="anchored" data-anchor-id="time">time</h2>
<p>modelling time in graph was challenging. my simple model above does take time into account other than to have startTime, endTime, date. In reality, an activity can take have the same start time, end time but be scheduled over several weeks - sometimes consecutive, sometimes non-consecutive weeks. How should this be represented? week patterns? date ranges? or separate activities? what happens when an activity is scheduled over several days but the same time over several weeks for example, Mondays and Wednesdays between 09:00-11:00 for ten weeks?</p>
<p>this is where normalisation (footnote) and different designs come into play. In a relational database, it is fairly easy to normalise the data into activities where start and end time and day(s) of week, staff, locations, students are the same for the week pattern. Any deviation will require a new ‘activity’ to accommodate the difference. Therefore there is an inevitable repetition of data.</p>
<p>In graph these scenarios can be handled in different ways. My initial model simply ported data as string data to an activity - that is, I literally created an activity as it existed in database and added start time, end time, weeks, etc. as properties of the activity.</p>
<p>This worked to an extent but it was not optimised for calculating on time.</p>
<p>I anticipated being able to answer questions and identify patterns like:</p>
<ul>
<li>students on programmes who do not have a lunch break (12:00-14:00)</li>
<li>students who have X hours consecutive teaching without a break</li>
<li>students who have X hours between teaching activities on any given date (e.g.&nbsp;early activity (09:00-10:00) and late finish (18:00-19:00))</li>
</ul>
<p>Being able to answer these types of queries easily will help pinpoint where there may be timetable quality concerns.</p>
<p>I considered and explored differnet options including:</p>
<ol type="1">
<li>activities with 52 week patterns (0000011101 etc.), start and end times</li>
<li>activities which are unique combinations of date, start, end, name</li>
<li>activities with date ranges, start and end times</li>
<li>activities linked to start time, end time and date nodes</li>
</ol>
<p>At this point, I did remember the project’s scope and reminded myself that it is a proof of concept. I settled for option 2 - where each activity is a unique combination of start, end, date and name. This required transforming from sql - there is some loss of redundancy but calculations on times are more manageable (although not uncomplicated). Also being restricted by Neo4j’s free aura instance, there is a limit to nodes (200K) and relationships (400K) which I would hit quickly.</p>
<p>My suspicion is that creating separate nodes for start and end times and dates dynamically from the activity data would be the better model - but this will need to be future work with direct comparisons aganst specific use cases and insights.</p>
</section>
<section id="appendix--" class="level2">
<h2 class="anchored" data-anchor-id="appendix--">appendix -</h2>
<section id="example-load" class="level3">
<h3 class="anchored" data-anchor-id="example-load">example load</h3>
<section id="attempt-2---load-separately" class="level4">
<h4 class="anchored" data-anchor-id="attempt-2---load-separately">Attempt 2 - load separately</h4>
<pre class="cypher"><code>// remove all relationships
MATCH ()-[r]-() 
DELETE r</code></pre>
<p><strong>activity-room</strong></p>
<pre class="cypher"><code>// Activity-Room
LOAD CSV WITH HEADERS FROM "file:///phl-rel-room-activity.csv" AS row3
MATCH (r:Room {roomSplusID: row3.roomSplusID}) 
MATCH (a:Activity {activitySplusID: row3.activitySplusID})
CREATE (a)-[:TAKES_PLACE_IN]-&gt;(r)</code></pre>
<p><strong>activity-staff</strong></p>
<pre class="cypher"><code>// Staff-activity 
LOAD CSV WITH HEADERS FROM "file:///phl-rel-staff-activity.csv" AS row2
MATCH (s:Staff {staffSplusID: row2.staffSplusID}) 
MATCH (a:Activity {activitySplusID: row2.activitySplusID})
CREATE (s)-[:TEACHES_ON]-&gt;(a)</code></pre>
<p><strong>activity-student</strong></p>
<pre class="cypher"><code>// Student-Activity
LOAD CSV WITH HEADERS FROM "file:///phl-rel-student-activity.csv" AS row
MATCH (s:Student {studentSplusID: row.studentSplusID}) 
MATCH (a:Activity {activitySplusID: row.activitySplusID})
CREATE (s)-[:IS_ALLOCATED_TO]-&gt;(a)</code></pre>
</section>
</section>
</section>
</section>
<section id="results" class="level1">
<h1>results</h1>
<p>v1-core-poc.png</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
    const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
    const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
    let newTheme = '';
    if(darkModeDefault) {
      newTheme = isAlternate ? baseTheme : alternateTheme;
    } else {
      newTheme = isAlternate ? alternateTheme : baseTheme;
    }
    const changeGiscusTheme = () => {
      // From: https://github.com/giscus/giscus/issues/336
      const sendMessage = (message) => {
        const iframe = document.querySelector('iframe.giscus-frame');
        if (!iframe) return;
        iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
      }
      sendMessage({
        setConfig: {
          theme: newTheme
        }
      });
    }
    const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
    if (isGiscussLoaded) {
      changeGiscusTheme();
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  const darkModeDefault = false;
  let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
    toggleGiscusIfUsed(toAlternate, darkModeDefault);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation column-body">
  <div class="nav-page nav-page-previous">
      <a href="./02-01-comparison.html" class="pagination-link" aria-label="Graph vs Relational Data Models">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text">Graph vs Relational Data Models</span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./02-02b-expand.html" class="pagination-link" aria-label="Early Insights and Model Expansion">
        <span class="nav-page-text">Early Insights and Model Expansion</span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
<p>Copyright 2024, Petter Lövehagen</p>
</div>   
    <div class="nav-footer-center">
      &nbsp;
    </div>
    <div class="nav-footer-right">
<p>Built with Quarto</p>
</div>
  </div>
</footer>
<script>var lightboxQuarto = GLightbox({"openEffect":"fade","descPosition":"bottom","selector":".lightbox","loop":false,"closeEffect":"fade"});
(function() {
  let previousOnload = window.onload;
  window.onload = () => {
    if (previousOnload) {
      previousOnload();
    }
    lightboxQuarto.on('slide_before_load', (data) => {
      const { slideIndex, slideNode, slideConfig, player, trigger } = data;
      const href = trigger.getAttribute('href');
      if (href !== null) {
        const imgEl = window.document.querySelector(`a[href="${href}"] img`);
        if (imgEl !== null) {
          const srcAttr = imgEl.getAttribute("src");
          if (srcAttr && srcAttr.startsWith("data:")) {
            slideConfig.href = srcAttr;
          }
        }
      } 
    });
  
    lightboxQuarto.on('slide_after_load', (data) => {
      const { slideIndex, slideNode, slideConfig, player, trigger } = data;
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(slideNode);
      }
    });
  
  };
  
})();
          </script>




</body></html>